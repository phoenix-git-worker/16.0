<odoo>
    <record id="kw_gem_kw_payers_wizard_views_form"
            model="ir.ui.view">
        <field name="name">kw.payers.wizard.form</field>
        <field name="model">kw.payers.wizard</field>
        <field name="arch" type="xml">
            <form>
                <group>
                    <field name="sale_order_id" invisible="1"/>
                    <field name="share_total" invisible="1"/>
                    <field name="partner_ids" invisible="1"/>
                    <field name="remnant" invisible="1"/>
                    <field name="is_complete" invisible="1"/>
                    <field name="id" invisible="1"/>
                </group>
                <field name="wizard_payment_ids"
                       context="{'default_wizard_id': id, 'default_partner_ids': partner_ids, 'default_remnant': remnant, 'default_share': remnant,}"
                        mode="tree" widget="kw_x2many">
                        <tree editable="bottom" create="true">
                            <field name="payment_line_id" invisible="1"/>
                            <field name="payer_agreement_ids" invisible="1"/>
                            <field name="partner_ids" invisible="1"/>
                            <field name="payment_method_ids" invisible="1"/>
                            <field name="remnant" invisible="1"/>
                            <field name="partner_id" context="{'default_company_type': 'company'}" domain="[('id', 'in', partner_ids)]"
                                   options="{'no_quick_create': true}"/>
                            <field name="payer_agreement_id" domain="[('id', 'in', payer_agreement_ids)]" options="{'no_create': true, 'no_quick_create': true, 'no_open': true}"/>
                            <field name="kw_payment_method_id" domain="[('id', 'in', payment_method_ids)]"/>
                            <field name="share" sum="Total" decoration-danger="is_share_warning==True" on_change="1"/>
                            <field name="discount" decoration-danger="is_discount_warning==True"/>
                            <field name="is_main_payer"/>
                            <field name="is_discount_warning" invisible="1"/>
                            <field name="is_share_warning" invisible="1"/>
                            <field name="is_less_share_warning" invisible="1"/>
                            <field name="is_main_payer_warning" invisible="1"/>
                    </tree>
                </field>
                <field name="sale_order_payment_ids"
                       context="{'default_sale_order_id': sale_order_id, 'default_partner_ids': partner_ids, 'default_remnant': remnant, 'default_share': remnant,}"
                       widget="kw_x2many" mode="tree" invisible="1">
                        <tree editable="bottom" create="true">
                            <field name="id" invisible="1"/>
                            <field name="sale_order_id" invisible="1"/>
                            <field name="payer_agreement_ids" invisible="1"/>
                            <field name="partner_ids" invisible="1"/>
                            <field name="payment_method_ids" invisible="1"/>
                            <field name="remnant" invisible="1"/>
                            <field name="partner_id" context="{'default_company_type': 'company'}" domain="[('id', 'in', partner_ids)]"
                                   options="{'no_quick_create': true}"/>
                            <field name="payer_agreement_id" domain="[('id', 'in', payer_agreement_ids)]" options="{'no_create': true, 'no_quick_create': true, 'no_open': true}"/>
                            <field name="kw_payment_method_id" domain="[('id', 'in', payment_method_ids)]"/>
                            <field name="share" sum="Total" decoration-danger="is_share_warning==True"/>
                            <field name="discount" decoration-danger="is_discount_warning==True"/>
                            <field name="is_main_payer"/>
                            <field name="is_discount_warning" invisible="1"/>
                            <field name="is_share_warning" invisible="1"/>
                            <field name="is_less_share_warning" invisible="1"/>
                            <field name="is_main_payer_warning" invisible="1"/>
                    </tree>
                </field>
                <footer>
                    <button name="add_payers"
                            type="object" class="oe_highlight"
                            string="Save"/>
                    <button special="cancel"
                            string="Cancel"/>
                </footer>
            </form>
        </field>
    </record>
</odoo>

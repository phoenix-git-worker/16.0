<odoo>

    <record model="ir.ui.view" id="sample_view_cassette_cassette_tree">
        <field name="model">kw.gem.cassette</field>
        <field name="arch" type="xml">
            <tree create="true" default_order='create_date desc'>
                <field name="name"/>
                <field name="sample_id" optional="show"/>
                <field name="sample_name_ids" widget="many2many_tags" optional="show"/>
                <field name="sale_order_id" optional="show"/>
                <field name="patient_id"/>
                <field name="additional_barcode" optional="show"/>
                <field name="create_uid" optional="show" widget="many2one_avatar_user" string="Created by"/>
                <field name="create_date" optional="show" string="Creation Date"/>
                <field name="state" optional="show"/>
                <field name="procedure_id" optional="show"/>
                <field name="start_procedure_time" optional="show"/>
                <field name="procedure_duration" optional="show"/>
                <field name="end_procedure_time" optional="show"/>
                <field name="slide_qty" optional="show"/>
            </tree>
        </field>
    </record>

    <record id="kw_gem_kw_gem_cassette_from_kw_gem_sample_act_window" model="ir.actions.act_window">
        <field name="name">Cassette</field>
        <field name="res_model">kw.gem.cassette</field>
        <field name="view_mode">tree,form</field>
        <field name="view_id" ref="kw_gem.sample_view_cassette_cassette_tree"/>
        <field name="domain">[('sample_id','=',active_id)]</field>
        <field name="context">{'default_sample_id': active_id}</field>
        <field name="help" type="html">
            <p class="o_view_nocontent_smiling_face">
                Cassette is not found!
            </p>
        </field>
     </record>

    <record model="ir.ui.view" id="view_kw_gem_sample_tree">
        <field name="model">kw.gem.sample</field>
        <field name="arch" type="xml">
            <tree default_order='create_date desc'>
                <field name="name"/>
                <field name="sale_order_id" optional="show"/>
                <field name="patient_id"/>
                <field name="sample_name_ids" widget="many2many_tags" optional="show"/>
                <field name="sample_type_ids" widget="many2many_tags" optional="show"/>
                <field name="create_uid" optional="show" widget="many2one_avatar_user" string="Created by"/>
                <field name="create_date" optional="show" string="Creation Date"/>
                <field name="state" optional="show"/>
                <field name="cassette_qty" optional="show"/>
                <field name="virtual_cassette_id" invisible="1"/>
            </tree>
        </field>
    </record>

    <record model="ir.ui.view" id="view_kw_gem_sample_menu_tree">
        <field name="model">kw.gem.sample</field>
        <field name="arch" type="xml">
            <tree create="false" default_order='create_date desc'>
                <field name="name"/>
                <field name="sale_order_id" optional="show"/>
                <field name="patient_id"/>
                <field name="sample_name_ids" widget="many2many_tags" optional="show"/>
                <field name="sample_type_ids" widget="many2many_tags" optional="show"/>
                <field name="create_uid" optional="show" widget="many2one_avatar_user" string="Created by"/>
                <field name="create_date" optional="show" string="Creation Date"/>
                <field name="state" optional="show"/>
                <field name="cassette_qty" optional="show"/>
                <field name="virtual_cassette_id" invisible="1"/>
            </tree>
        </field>
    </record>

    <record model="ir.ui.view" id="view_kw_gem_sample_form">
        <field name="model">kw.gem.sample</field>
        <field name="arch" type="xml">
            <form>
                <header>
                    <field name="state" widget="statusbar" clickable="1"/>
                </header>
                <sheet>
                    <div class="oe_button_box" name="button_box">
                        <button class="oe_stat_button" type="action"
                                name="%(kw_gem_kw_gem_cassette_from_kw_gem_sample_act_window)d"
                                icon="fa-cogs" attrs="{'invisible':[('state','=','draft')]}">
                            <field string="Cassettes" name="cassette_qty"
                                   widget="statinfo"/>
                        </button>
                        <button class="oe_stat_button" type="object"
                                name="slide_open_action"
                                icon="fa-cogs">
                            <field string="Slides" name="slide_qty"
                                   widget="statinfo"/>
                        </button>
                    </div>
                    <div name="title_line" style="width: 100%">
                        <div class="oe_title">
                            <h1>
                                <field name="name"/>
                            </h1>
                        </div>
                    </div>
                    <group>
                        <group>
                            <field name="kw_object_type"/>
                            <field name="sample_name_ids" widget="many2many_tags" options="{'no_open': True, 'no_create': True}"/>
                            <field name="all_sample_type_ids" invisible="1"/>
                            <field name="sample_type_ids" widget="many2many_tags" domain="[('id', 'in', all_sample_type_ids)]" options="{'no_open': True, 'no_create': True}"/>
                            <field name="sale_order_id"/>
                            <field name="patient_id"/>
                        </group>
                        <group>
                            <field name="create_date" string="Creation Date"/>
                            <field name="all_examination_type_ids" invisible="1"/>
                            <field name="examination_type_ids" domain="[('id', 'in', all_examination_type_ids)]" widget="many2many_tags" options="{'no_open': True, 'no_create': True}"/>
                            <field name="create_uid" string="Created by"/>
                            <field name="doctor_ids" invisible="1"/>
                            <field name="doctor_id" options="{'no_open': True, 'no_create': True}" domain="[('id', 'in', doctor_ids)]"/>
                            <field name="comment"/>
                            <field name="virtual_cassette_id" invisible="1"/>
                        </group>
                    </group>
                    <notebook>
                        <page string="Description">
                            <field name="description" widget="html"/>
                        </page>
                        <page string="Cassettes" invisible="0" attrs="{'invisible':[('state','=','draft')]}">
                            <field name="is_number_of_cassettes_warning" invisible="1"/>
                            <div class="o_row">
                                <span><label for="examination_type_default_id" class="o_form_label font-weight-bold oe_inline" style="width: 25%"/>
                                    <field name="examination_type_default_id" style="width: 55%;" domain="[('id', 'in', examination_type_ids)]" options="{'no_open': True, 'no_create': True, 'no_quick_create': true}"/></span>
                                <span><label for="number_of_cassettes" class="o_form_label font-weight-bold" style="width: 25%" string="Number Of Ð¡assettes To Create"/>
                                    <field name="number_of_cassettes" decoration-danger="is_number_of_cassettes_warning==True" style="width: 55%;"/></span>
                                <button name="create_cassettes" type="object" string="Create cassettes" class="kw-gem-down-button btn-primary"/>
                            </div>
                            <field name="cassette_ids">
                                <tree editable="bottom" create="false" no_open="True">
                                    <field name="cassette_id" string="Cassette ID" widget="many2one"/>
                                    <field name="sample_id" invisible="1"/>
                                    <field name="sale_order_id" invisible="1"/>
                                    <field name="patient_id" invisible="1"/>
                                    <field name="sample_examination_type_ids" invisible="1"/>
                                    <field name="state"/>
                                    <field name="examination_type_ids" options="{'no_open': True, 'no_create': True, 'no_quick_create': true}"
                                           domain="[('id', 'in', sample_examination_type_ids)]" widget="many2many_tags"/>
                                    <field name="sample_part" widget="html" readonly="0"/>
                                    <field name="slide_qty"/>
                                    <field name="examination_type_default_id" invisible="1"/>
                                </tree>
                            </field>
                            <button name="add_cassette_action" type="object"
                                    string="Add a Cassette"
                                    class="btn-primary"/>
                        </page>
                        <page string="Stage History">
                            <field name="stage_history_ids" options="{'no_open': true}" readonly="True">
                                <tree editable="bottom">
                                    <field name="name" string="Status"/>
                                    <field name="create_date" string="Stage Setting Date"/>
                                    <field name="create_uid" string="Last Updated by"/>
                                </tree>
                            </field>
                        </page>
                    </notebook>
                </sheet>
            </form>
        </field>
    </record>

    <record id="kw_gem_kw_gem_sample_act_window" model="ir.actions.act_window">
        <field name="name">Sample</field>
        <field name="res_model">kw.gem.sample</field>
        <field name="view_mode">tree,form</field>
        <field name="view_id" ref="kw_gem.view_kw_gem_sample_tree"/>
        <field name="domain">[('sale_order_id','=',active_id)]</field>
        <field name="context">{'default_sale_order_id': active_id}</field>
    </record>

    <record id="kw_gem_kw_gem_sample_menu_act_window" model="ir.actions.act_window">
        <field name="name">Sample</field>
        <field name="res_model">kw.gem.sample</field>
        <field name="view_mode">tree,form</field>
        <field name="view_id" ref="kw_gem.view_kw_gem_sample_menu_tree"/>
    </record>

    <menuitem id="kw_gem_kw_gem_sample_menu"
              action="kw_gem_kw_gem_sample_menu_act_window"
              parent="sale.sale_order_menu"
              name="All Samples" sequence="200"/>


    <record model="ir.ui.view" id="view_kw_gem_sample_type_tree">
        <field name="model">kw.gem.sample.type</field>
        <field name="arch" type="xml">
            <tree editable="top">
                <field name="name"/>
                <field name="name_ge" invisible="1"/>
            </tree>
        </field>
    </record>

    <record id="kw_gem_kw_gem_sample_type_act_window" model="ir.actions.act_window">
        <field name="name">Sample types</field>
        <field name="res_model">kw.gem.sample.type</field>
        <field name="view_mode">tree</field>
    </record>

    <menuitem id="kw_gem_kw_gem_sample_type_menu"
              action="kw_gem_kw_gem_sample_type_act_window"
              parent="kw_gem_catalogs_menu"
              name="Sample Types" sequence="200"/>


    <record model="ir.ui.view" id="view_kw_gem_sample_name_tree">
        <field name="model">kw.gem.sample.name</field>
        <field name="arch" type="xml">
            <tree editable="top">
                <field name="name"/>
                <field name="name_ge" invisible="1"/>
            </tree>
        </field>
    </record>

    <record model="ir.ui.view" id="view_kw_gem_sample_name_search">
        <field name="model">kw.gem.sample.name</field>
        <field name="arch" type="xml">
            <search>
                <field name="name"/>
                <separator/>
                <filter name="filter_archived"
                        string="Archived"
                        domain="[('active', '=', False)]"/>
                <filter name="filter_active"
                        string="Active"
                        domain="[('active', '=', True)]"/>
            </search>
        </field>
    </record>

    <record id="kw_gem_kw_gem_sample_name_act_window" model="ir.actions.act_window">
        <field name="name">Sample names</field>
        <field name="res_model">kw.gem.sample.name</field>
        <field name="view_mode">tree</field>
    </record>

    <menuitem id="kw_gem_kw_gem_sample_name_menu"
              action="kw_gem_kw_gem_sample_name_act_window"
              parent="kw_gem_catalogs_menu"
              name="Sample Names" sequence="100"/>

    <record id="view_kw_gem_sample_filter" model="ir.ui.view">
        <field name="name">kw.gem.sample.select</field>
        <field name="model">kw.gem.sample</field>
        <field name="priority">1</field>
        <field name="arch" type="xml">
            <search>
                <field name="name"/>
                <field name="patient_id" string="Patient" domain="[('name','ilike','patient_id')]"/>
            </search>
        </field>
    </record>

</odoo>
